---
import { getTechIconSvg, CATEGORY_COLORS, TECH_DESCRIPTIONS } from '../lib/icons';

interface Props {
  name: string;
  slug: string;
  category: string;
  color: string | null;
  size?: 'sm' | 'md';
}

const { name, slug, category, color, size = 'sm' } = Astro.props;
const iconUrl = getTechIconSvg(slug, color);
const categoryClass = CATEGORY_COLORS[category] || CATEGORY_COLORS.other;
const sizeClass = size === 'sm' ? 'text-xs px-2 py-0.5' : 'text-sm px-3 py-1';
const iconSize = size === 'sm' ? 'w-3.5 h-3.5' : 'w-4 h-4';
const description = TECH_DESCRIPTIONS[name] || '';
---
<button
  type="button"
  class:list={['inline-flex items-center gap-1 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity tech-badge', categoryClass, sizeClass]}
  data-tech-name={name}
  data-tech-desc={description}
>
  <img src={iconUrl} alt="" class={iconSize} loading="lazy" />
  {name}
</button>
